<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>SDR MK1 by satrian</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>SDR MK1</h1>
        <p>SDR &#39;Andrus&#39; MK1 Software Defined Radio Firmware</p>

        <p class="view"><a href="https://github.com/satrian/sdr-mk1">View the Project on GitHub <small>satrian/sdr-mk1</small></a></p>


        <ul>
          <li><a href="https://github.com/satrian/sdr-mk1/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/satrian/sdr-mk1/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/satrian/sdr-mk1">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>This is the repository for the SDR MK1 Software Defined Radio firmware. The MK1 is based on the Atmel AT90USB1287 microcontroller and LM97593 DRC chipset from National Semiconductor. The firmware is using the excellent <a href="http://www.fourwalledcubicle.com/LUFA.php" title="LUFA">LUFA library</a> from Dean Camera for communicating through USB.</p>

<p>Please note, that in order to be able to upgrade the firmware, you will need:</p>

<pre><code>[Atmel FLIP utility](http://www.atmel.com/tools/FLIP.aspx "Atmel FLIP utility") together with the included USB driver. 
</code></pre>

<p>Please refer the Firmware Upgrade Instructions Wiki page for how to perform the upgrade.</p>

<p>In order to work on source code, you will need:</p>

<pre><code>[AVR studio 4, AVR Studio 5 or later] (http://www.atmel.com/microsite/atmel-studio/ "Atmel Studio")
[LUFA library] (http://www.fourwalledcubicle.com/LUFA.php "LUFA")
</code></pre>

<p>Note, that although LUFA is relying on <a href="http://sourceforge.net/projects/winavr/">WinAVR</a> for the GNU Tools (C compiler and such), the makefile for the SDR MK1 is able to use the toolchain provided with AVR Studio 5. If you are using the AVR Studio 4, you either have to download a separate <a href="http://www.atmel.com/tools/ATMELAVRTOOLCHAINFORWINDOWS.aspx">AVR Toolchain Installer</a> or install WinAVR. (I really haven't tested it with AVR Studio 4 + AVR Toolchain combo, so WinAVR approach is recommended for AVR Studio 4.) </p>

<h2>
<a id="sdr-mk1-firmware-upgrade-instructions" class="anchor" href="#sdr-mk1-firmware-upgrade-instructions" aria-hidden="true"><span class="octicon octicon-link"></span></a>SDR MK1 Firmware Upgrade Instructions</h2>

<p>Note, that these instructions are valid for Windows environment. While the general principle is the same for Linux, I have no instructions for upgrading the firmware under Linux. It would be great, if anyone familiar with the procedure would be kind to write Linux-specific comments!</p>

<ul>
<li>First, you need to download <a href="http://www.atmel.com/tools/FLIP.aspx" title="Atmel FLIP utility">Atmel FLIP utility</a>. You do not have to download the bootloaders, the AT90USB1287 chip has bootloader already installed.</li>
<li>Download the SDR_MK1.hex firmware and .INF file from download section</li>
<li>Install FLIP</li>
<li>Connect the SDR MK1 radio board to the computer</li>
<li>The SDR board has by default the 2-pin header installed where the ICSP connector is (JP1, upper rihgt corner, pins 5 and 6). There is a loose jumper connected to one of the pins. After connecting the board, short the two pins shortly with the jumper (does not really matter for how long, it's a reset signal and triggers immediately) and then <em>remove</em> the jumper again. You should now have a brightly lit green LED and little fainter red LED showing up.</li>
<li>You should now see new USB device appearing. The appropriate driver came with FLIP installation, so if prompted for a driver (or selecting manually), you should point it to the FLIP catalog USB subdirectory (c:\program files\Atmel\Flip 3.4.2\USB on my case). After installing the driver you should have the new USB device named AT90USB1287 present on the device manager.</li>
<li>Run the FLIP utility, press the USB-connector-like icon and choose USB as commnucation medium. You should see no error messages and FLIP should recognise the chip, resulting with the screen like that:</li>
</ul>

<p><img src="wiki/flip.JPG" alt="FLIP"></p>

<ul>
<li>From File menu load the Hex file and press the "Run" buttom on the bottom left. The update and verify progress bars should appear for short time, then the upgrade is finished. There is no "success" message or anything.</li>
<li>Plug the USB cable off and re-connect. If after 1-2sec. the two green leds are lit, then the upgrade was success.</li>
<li>If in doubt that something is not working right, please uninstall all the USB devices associated with the radio (should be one or two audio devices and one or two serial ports), unplug the USB cable and re-plug. All the devices should appear automatically, given that you had it installed correctly previously.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/satrian">satrian</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
